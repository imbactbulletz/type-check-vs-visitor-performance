Type check vs visitor performance